<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste de Funcionalidade das PÃ¡ginas</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 16px;
    }
    .test-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      border-left: 4px solid #2196F3;
    }
    .test-card.success {
      border-left-color: #4CAF50;
    }
    .test-card.error {
      border-left-color: #f44336;
    }
    .test-card.warning {
      border-left-color: #ff9800;
    }
    .test-title {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .icon {
      font-size: 20px;
    }
    .test-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .test-list li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      font-size: 14px;
    }
    .test-list li:last-child {
      border-bottom: none;
    }
    .pass {
      color: #4CAF50;
    }
    .fail {
      color: #f44336;
    }
    .warn {
      color: #ff9800;
    }
    .summary {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      margin-top: 10px;
    }
    .btn-primary {
      background: #2196F3;
      color: white;
    }
    .btn-success {
      background: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ðŸ§ª Teste de Funcionalidade - Sistema de Dashboard</h1>
    <p>Verificando integridade das pÃ¡ginas da sidebar e funcionalidades crÃ­ticas</p>
  </div>

  <div id="testResults" class="test-grid"></div>

  <div class="summary">
    <h2>ðŸ“Š Resumo dos Testes</h2>
    <div id="summaryContent"></div>
  </div>

  <script>
    // Dados de teste
    const pages = [
      {
        name: 'Dashboard',
        icon: 'ðŸ“Š',
        url: 'dashboard/index.html',
        requiredModules: ['analyticsModule', 'authService', 'themeModule', 'dashboardCustomizationModule'],
        requiredElements: ['userName', 'userRole', 'vendas-aprovadas', 'tableBody'],
      },
      {
        name: 'Produtos',
        icon: 'ðŸ“¦',
        url: 'products/index.html',
        requiredModules: ['authService', 'productsApp'],
        requiredElements: ['productTable', 'productForm'],
      },
      {
        name: 'Categorias',
        icon: 'ðŸ·ï¸',
        url: 'categories/index.html',
        requiredModules: ['authService', 'categoriesApp'],
        requiredElements: ['categoryList', 'categoryForm'],
      },
      {
        name: 'Estoque',
        icon: 'ðŸ“¦',
        url: 'stock/index.html',
        requiredModules: ['authService', 'stockApp', 'productsApp'],
        requiredElements: ['stockForm', 'stockHistory'],
      },
      {
        name: 'Vendas',
        icon: 'ðŸ’°',
        url: 'sales/index.html',
        requiredModules: ['authService', 'salesApp'],
        requiredElements: ['salesForm', 'salesTable'],
      },
      {
        name: 'RelatÃ³rios',
        icon: 'ðŸ“ˆ',
        url: 'reports/index.html',
        requiredModules: ['authService', 'reportsApp'],
        requiredElements: ['reportType', 'reportContent'],
      },
      {
        name: 'Importar',
        icon: 'ðŸ“¥',
        url: 'import/index.html',
        requiredModules: ['authService', 'importApp'],
        requiredElements: ['importForm', 'previewContainer'],
      },
      {
        name: 'ConfiguraÃ§Ãµes',
        icon: 'âš™ï¸',
        url: 'settings/index.html',
        requiredModules: ['authService', 'settingsApp', 'backupModule'],
        requiredElements: ['accountSettings', 'backupSection'],
      },
    ];

    // Realizar testes
    async function runTests() {
      const results = [];
      
      for (const page of pages) {
        const result = {
          name: page.name,
          icon: page.icon,
          url: page.url,
          tests: []
        };

        try {
          const response = await fetch(`examples/${page.url}`);
          if (response.ok) {
            const html = await response.text();
            
            // Teste 1: Arquivo HTML existe
            result.tests.push({
              name: 'Arquivo HTML',
              pass: true
            });

            // Teste 2: ContÃ©m navbar
            result.tests.push({
              name: 'Navbar/Menu',
              pass: html.includes('nav-menu') || html.includes('navbar')
            });

            // Teste 3: ContÃ©m autenticaÃ§Ã£o
            result.tests.push({
              name: 'AutenticaÃ§Ã£o',
              pass: html.includes('authService') || html.includes('requireAuth')
            });

            // Teste 4: ContÃ©m tema
            result.tests.push({
              name: 'Tema/Estilo',
              pass: html.includes('stylesheet') || html.includes('.css')
            });

            // Teste 5: MÃ³dulos necessÃ¡rios
            const modulesLoaded = page.requiredModules.filter(m => 
              html.includes(`${m}.js`) || html.includes(m)
            ).length;
            result.tests.push({
              name: `MÃ³dulos (${modulesLoaded}/${page.requiredModules.length})`,
              pass: modulesLoaded >= Math.ceil(page.requiredModules.length * 0.7)
            });

            // Teste 6: Elementos crÃ­ticos
            const elementsFound = page.requiredElements.filter(e => 
              html.includes(`id="${e}"`) || html.includes(`"${e}"`)
            ).length;
            result.tests.push({
              name: `Elementos (${elementsFound}/${page.requiredElements.length})`,
              pass: elementsFound > 0
            });

            // Teste 7: Scripts carregados
            const scriptCount = (html.match(/<script/g) || []).length;
            result.tests.push({
              name: `Scripts (${scriptCount} encontrados)`,
              pass: scriptCount >= 2
            });

          } else {
            result.tests.push({
              name: 'Arquivo nÃ£o encontrado',
              pass: false
            });
          }
        } catch (error) {
          result.tests.push({
            name: `Erro: ${error.message}`,
            pass: false
          });
        }

        results.push(result);
      }

      displayResults(results);
    }

    function displayResults(results) {
      const testResults = document.getElementById('testResults');
      testResults.innerHTML = '';

      let totalPass = 0;
      let totalTests = 0;

      results.forEach(result => {
        const passCount = result.tests.filter(t => t.pass).length;
        const totalCount = result.tests.length;
        totalPass += passCount;
        totalTests += totalCount;

        const cardClass = passCount === totalCount ? 'success' : (passCount >= totalCount * 0.7 ? 'warning' : 'error');
        
        const card = document.createElement('div');
        card.className = `test-card ${cardClass}`;
        card.innerHTML = `
          <div class="test-title">
            <span class="icon">${result.icon}</span>
            <span>${result.name}</span>
            <span style="margin-left: auto; font-size: 14px; font-weight: 400;">
              ${passCount}/${totalCount}
            </span>
          </div>
          <ul class="test-list">
            ${result.tests.map(test => `
              <li>
                <span class="${test.pass ? 'pass' : 'fail'}">
                  ${test.pass ? 'âœ“' : 'âœ—'}
   
